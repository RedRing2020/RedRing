# モジュール構成 / Module Structure

RedRing は、責務分離と型安全性を重視したワークスペース設計に基づいて構成されています。以下は主要なクレート群の概要です。

## 幾何計算層

### `geo_foundation`

**抽象型・トレイト定義・橋渡し**

- 共通トレイト（`Normalizable`, `DistanceCalculation` など）
- エラー処理ガイドライン
- 型安全な抽象化

### `geo_core`

**許容誤差・ロバスト幾何判定**

- `ToleranceContext` による許容誤差管理
- トレラント比較
- ロバスト幾何判定（orientation など）

### `geo_primitives`

**f64 正準幾何プリミティブ**

- 基本要素：`Point`, `Vector`, `Direction`
- 幾何形状：`Line`, `Circle`, `Ellipse`, `Arc`
- 2D/3D 両対応のジェネリック実装

### `geo_algorithms`

**幾何アルゴリズム**

- 交点計算
- 曲線・曲面操作
- 幾何変換

### `model`

**高次曲線・曲面**

- NURBS 曲線・曲面（今後実装予定）
- 複雑な幾何モデル
- 抽象化レイヤ

### `analysis`

**数値解析・CAM 処理**

- 数値計算ユーティリティ
- CAM パス生成（今後実装予定）
- 切削シミュレーション（今後実装予定）

## レンダリング層

### `render`

**GPU 描画基盤**

- wgpu + WGSL による GPU レンダリング
- シェーダ管理
- 頂点データ処理

### `stage`

**レンダリングステージ管理**

- `RenderStage` トレイト
- レンダリングパイプライン管理
- シーン構成

### `viewmodel`

**ビュー操作・変換ロジック**

- カメラ制御
- ビュー変換
- ユーザーインタラクション

### `redring`

**メインアプリケーション**

- アプリケーションエントリポイント
- 全クレート統合
- ウィンドウ管理

## 構造設計の方針

- **型安全性**：コンパイル時エラー検出を最大化
- **責務分離**：各クレートが単一の責務を持つ
- **モジュール性**：`render` は `model` に依存しない設計
- **拡張性**：将来的な NURBS や WebAssembly 対応を考慮
- **国際化**：英語ベースの命名で国際的な貢献を促進
