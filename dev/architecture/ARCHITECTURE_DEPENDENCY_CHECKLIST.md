# RedRing ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¾å­˜æ€§ãƒã‚§ãƒƒã‚¯é …ç›®

## ğŸ“‹ **ä¾å­˜æ€§ãƒ«ãƒ¼ãƒ«æ¦‚è¦**

### **åŸºæœ¬åŸå‰‡**

- **View â†’ ViewModel â†’ Model** ã®ä¸€æ–¹å‘ä¾å­˜
- **Model å±¤å‘½åè¦å‰‡**: `geo_` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹å¿…é ˆ
- **analysis**: å®Œå…¨ç‹¬ç«‹ï¼ˆæ•°å€¤è¨ˆç®—å°‚ç”¨ï¼‰
- **é€†æ–¹å‘ä¾å­˜**: å…¨é¢ç¦æ­¢

---

## ğŸ—ï¸ **å±¤åˆ¥ä¾å­˜æ€§ãƒãƒˆãƒªãƒƒã‚¯ã‚¹**

### **Model å±¤ (geo\_\*)**

#### ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³ï¼ˆ2025å¹´11æœˆ11æ—¥æ™‚ç‚¹ï¼‰

```text
geo_foundation â†’ analysis âœ…
geo_core â†’ geo_foundation, analysis âœ…
geo_primitives â†’ geo_foundation, geo_core, analysis âœ…
geo_algorithms â†’ geo_primitives âš ï¸ (ç°¡ç•¥åŒ–å®Ÿè£…)
geo_nurbs â†’ geo_foundation, analysis âš ï¸ (Foundation ãƒ‘ã‚¿ãƒ¼ãƒ³é•åçŠ¶æ…‹)
geo_io â†’ geo_foundation, geo_core, geo_primitives, geo_algorithms, analysis âœ…
```

#### ç›®æ¨™ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆä¿®æ­£äºˆå®šï¼‰

```text
geo_foundation â†’ analysis âœ…
geo_core â†’ geo_foundation, analysis âœ…
geo_primitives â†’ geo_foundation, geo_core, analysis âœ…
geo_algorithms â†’ geo_foundation, geo_core, geo_primitives, analysis âœ…
geo_nurbs â†’ geo_foundation, geo_core, analysis âœ… (geo_core çµŒç”±ã‚¢ã‚¯ã‚»ã‚¹)
geo_io â†’ geo_foundation, geo_core, geo_primitives, geo_algorithms, analysis âœ…
```

### **ViewModel å±¤**

```text
converter â†’ geo_*, analysis âœ… (ä¾‹å¤–: geo_ioç›´æ¥å‚ç…§è¨±å¯)
graphics â†’ geo_foundation, geo_core, geo_primitives, analysis âœ…
```

### **View å±¤**

```text
render â†’ analysis âœ… (GPUå±¤ç‹¬ç«‹æ€§ä¿æŒ)
stage â†’ render, analysis âœ…
app â†’ converter, graphics, render, stage, analysis âœ…
```

### **Analysis å±¤**

```text
analysis â†’ ãªã— âœ… (å®Œå…¨ç‹¬ç«‹)
```

---

## âŒ **ç¦æ­¢ã•ã‚ŒãŸä¾å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³**

### **Model â†’ ViewModel/View ç¦æ­¢**

- `geo_*` â†’ `converter`, `graphics` âŒ
- `geo_*` â†’ `render`, `stage`, `app` âŒ

### **ViewModel â†’ View ç¦æ­¢**

- `converter` â†’ `render`, `stage`, `app` âŒ
- `graphics` â†’ `render`, `stage`, `app` âŒ

### **View â†’ Model ç¦æ­¢ (ä¾‹å¤–ã‚ã‚Š)**

- `render` â†’ `geo_*` âŒ
- `stage` â†’ `geo_*` âŒ
- `app` â†’ `geo_*` âŒ
- **ä¾‹å¤–**: `View` â†’ `geo_foundation` (å°†æ¥è¨±å¯äºˆå®š)

### **Analysis å®Œå…¨ç‹¬ç«‹**

- `analysis` â†’ ä»–ã™ã¹ã¦ âŒ

---

## ğŸ” **ãƒã‚§ãƒƒã‚¯é …ç›®è©³ç´°**

### **1. å‘½åè¦å‰‡ãƒã‚§ãƒƒã‚¯**

- [ ] Model å±¤ã‚¯ãƒ¬ãƒ¼ãƒˆã« `geo_` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
- [ ] å¿…é ˆã‚¯ãƒ¬ãƒ¼ãƒˆå­˜åœ¨ç¢ºèª:
  - [ ] `geo_foundation` (æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼)
  - [ ] `geo_core` (åŸºç›¤ãƒ»ãƒ–ãƒªãƒƒã‚¸å½¹)
  - [ ] `geo_primitives` (ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–)
  - [ ] `geo_algorithms` (ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )
  - [ ] `geo_nurbs` (NURBS ã‚·ã‚¹ãƒ†ãƒ  - 2025å¹´11æœˆè¿½åŠ )
  - [ ] `geo_io` (I/O å°‚ç”¨)

### **2. ä¾å­˜æ–¹å‘ãƒã‚§ãƒƒã‚¯**

- [ ] View â†’ ViewModel â†’ Model ã®ä¸€æ–¹å‘æ€§
- [ ] é€†æ–¹å‘ä¾å­˜ã®æ¤œå‡ºãƒ»æ’é™¤
- [ ] å¾ªç’°ä¾å­˜ã®æ¤œå‡ºãƒ»æ’é™¤

### **3. ä¾‹å¤–ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯**

- [ ] `ViewModel` â†’ `geo_io` ç›´æ¥å‚ç…§ (ãƒ‡ãƒ¼ã‚¿å¤‰æ›åŠ¹ç‡åŒ–)
- [ ] `render` ã® `model` éä¾å­˜ (GPU å±¤ç‹¬ç«‹æ€§)
- [ ] `analysis` ã®å®Œå…¨ç‹¬ç«‹æ€§

### **4. å…·ä½“çš„ä¾å­˜æ€§æ¤œè¨¼**

- [ ] `Cargo.toml` ã® `[dependencies]` ã‚»ã‚¯ã‚·ãƒ§ãƒ³è§£æ
- [ ] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã‚¯ãƒ¬ãƒ¼ãƒˆé–“ä¾å­˜ã®æŠ½å‡º
- [ ] å¤–éƒ¨ã‚¯ãƒ¬ãƒ¼ãƒˆä¾å­˜ã¨å†…éƒ¨ä¾å­˜ã®åˆ†é›¢

---

## ğŸ› ï¸ **è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**

### **å®Ÿè¡Œæ–¹æ³•**

```powershell
# åŸºæœ¬ãƒã‚§ãƒƒã‚¯
.\scripts\check_architecture_dependencies.ps1

# è©³ç´°ãƒ¢ãƒ¼ãƒ‰
.\scripts\check_architecture_dependencies.ps1 -Verbose

# ãƒ«ãƒ¼ãƒ«ç¢ºèª
.\scripts\check_architecture_dependencies.ps1 -Rules

# CI/CDç”¨ (ã‚¨ãƒ©ãƒ¼æ™‚çµ‚äº†)
.\scripts\check_architecture_dependencies.ps1 -ExitOnError
```

### **ãƒã‚§ãƒƒã‚¯å†…å®¹**

1. **å‘½åè¦å‰‡æ¤œè¨¼**: Model å±¤ `geo_*` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
2. **ä¾å­˜æ€§è§£æ**: `Cargo.toml` ã‹ã‚‰ä¾å­˜é–¢ä¿‚æŠ½å‡º
3. **ãƒ«ãƒ¼ãƒ«ç…§åˆ**: è¨±å¯/ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®ç…§åˆ
4. **å±¤åˆ¥ã‚µãƒãƒªãƒ¼**: å„å±¤ã®ä¾å­˜é–¢ä¿‚å¯è¦–åŒ–
5. **çµæœãƒ¬ãƒãƒ¼ãƒˆ**: ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šã®çµ±è¨ˆ

---

## ğŸ“Š **æœŸå¾…ã•ã‚Œã‚‹ä¾å­˜ã‚°ãƒ©ãƒ•**

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   analysis  â”‚ (å®Œå…¨ç‹¬ç«‹)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Modelå±¤                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚geo_foundationâ”‚ â† æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  geo_core   â”‚ â† åŸºç›¤            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚geo_primitivesâ”‚ â† ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚geo_algorithmsâ”‚ â”‚   geo_io    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–²                â–²
            â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ViewModelå±¤              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  converter  â”‚ â”‚  graphics   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Viewå±¤                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ render â”‚ â”‚ stage â”‚ â”‚  app  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **å®Ÿè£…æŒ‡é‡**

### **View å´ã§ã®ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹å¤‰æ›**

```rust
// âŒ æ‚ªã„ä¾‹: ViewãŒModelå…·è±¡å‹ã«ç›´æ¥ä¾å­˜
use geo_primitives::Circle3D;

// âœ… è‰¯ã„ä¾‹: ViewModelãŒæ©‹æ¸¡ã—
impl<T> ViewConverter<T> {
    fn convert_from_viewmodel(&self, data: ViewModelData) -> T {
        // Viewå´ã§ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹å¤‰æ›ã‚’å®Ÿè£…
    }
}
```

### **ViewModel å±¤ã§ã®å…·ä½“çš„ Model å‚ç…§**

```rust
// âœ… è¨±å¯: ViewModelã¯ geo_* ã¸ã®å…·ä½“çš„å‚ç…§
use geo_primitives::Circle3D;
use geo_algorithms::IntersectionAlgorithm;
use geo_io::StlLoader;  // ä¾‹å¤–: åŠ¹ç‡çš„ãƒ‡ãƒ¼ã‚¿å¤‰æ›

impl GeometryViewModel {
    fn process_geometry(&self) -> ViewData {
        // geo_* ã®å…·ä½“å®Ÿè£…ã‚’ä½¿ç”¨
    }
}
```

### **Model å±¤ã®ç‹¬ç«‹æ€§**

```rust
// âœ… Modelå±¤: ViewModel/Viewã¸ã®å‚ç…§ãªã—
// geo_primitives/src/circle.rs
impl Circle3D {
    fn calculate_area(&self) -> f64 {
        // ç´”ç²‹ãªå¹¾ä½•è¨ˆç®—ã€UIéä¾å­˜
    }
}
```

---

## ğŸš¨ **ã‚ˆãã‚ã‚‹é•åãƒ‘ã‚¿ãƒ¼ãƒ³**

### **1. é€†æ–¹å‘ä¾å­˜**

```rust
// âŒ geo_primitives ã‹ã‚‰ graphics ã¸ã®ä¾å­˜
use crate::graphics::Camera;  // ç¦æ­¢
```

### **2. å±¤è·¨ãä¾å­˜**

```rust
// âŒ View ã‹ã‚‰ Model ã¸ã®ç›´æ¥ä¾å­˜
use geo_primitives::Circle3D;  // ç¦æ­¢ (appå†…)
```

### **3. Analysis ã®ä¾å­˜æ€§ç ´ç¶»**

```rust
// âŒ analysis ã‹ã‚‰ä»–ã‚¯ãƒ¬ãƒ¼ãƒˆã¸ã®ä¾å­˜
use geo_foundation::GeometryTrait;  // ç¦æ­¢
```

ã“ã®ä¾å­˜æ€§ãƒã‚§ãƒƒã‚¯é …ç›®ã«ã‚ˆã‚Šã€RedRing ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ãŒä¿ãŸã‚Œã¾ã™ï¼
